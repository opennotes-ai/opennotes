# Open Notes CI Environment Configuration
#
# This file contains sanitized environment variables for CI/CD workflows.
# It's safe to commit to the repository as it contains no sensitive production data.
# All values are test/mock values appropriate for automated testing.

# ============================================================================
# CORE ENVIRONMENT
# ============================================================================

# Environment type for CI
ENVIRONMENT: test

# Service selection for mise tasks
SERVICE: all

# Enable debug mode for CI
DEBUG: true

# Logging level for CI
LOG_LEVEL: INFO
LOG_LEVEL_OVERRIDES: ""

# Docker image tag (used by mise tasks)
IMAGE_TAG: latest

# ============================================================================
# DATABASE - PostgreSQL (CI Test Database)
# ============================================================================

# Test database configuration (must match CI workflow postgres service)
POSTGRES_DB: opennotes_test
POSTGRES_USER: opennotes
POSTGRES_PASSWORD: opennotes_password

# Database URLs for different test scenarios (must match CI workflow postgres service)
DATABASE_URL: postgresql+asyncpg://opennotes:opennotes_password@localhost:5432/opennotes_test

# ============================================================================
# REDIS (CI Test Instance)
# ============================================================================

REDIS_URL: redis://localhost:6379/0
REDIS_HOST: localhost
REDIS_PORT: 6379
REDIS_DB: 0

# ============================================================================
# NATS (CI Test Instance)
# ============================================================================

NATS_URL: nats://localhost:4222

# ============================================================================
# SECURITY - Test Keys Only
# ============================================================================

# JWT Secret (CI test key - 64 character base64)
JWT_SECRET_KEY: dGVzdC1qd3Qtc2VjcmV0LWtleS1mb3ItY2ktdGVzdGluZy1vbmx5LWRvLW5vdC11c2UtaW4tcHJvZHVjdGlvbg==

# Credentials Encryption Key (CI test key - valid Fernet key)
CREDENTIALS_ENCRYPTION_KEY: fvcKFp4tKdCkUfhZ0lm9chCwL-ZQfjHtlm6tW2NYWlk=

# Master Encryption Key (CI test key - valid Fernet key)
ENCRYPTION_MASTER_KEY: F5UG5HjhMjOgapb3ADail98bpydyrnrFfgkH1YB_zuE=

# ============================================================================
# DISCORD - Mock Values for CI
# ============================================================================

# Discord Application (Mock values for testing)
DISCORD_CLIENT_ID: "123456789012345678"
DISCORD_PUBLIC_KEY: 0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef

# Discord Bot Token (Mock token for CI - not a real token)
DISCORD_TOKEN: test-discord-token-for-testing

# Discord Guild (Mock guild for testing)
DISCORD_GUILD_ID: "987654321098765432"

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================

# Server host and port
SERVER_HOST: 0.0.0.0
SERVER_PORT: 8001
SERVER_URL: http://localhost:8001

# API Configuration
API_BASE_URL: http://localhost:8001/api
API_VERSION: v1

# ============================================================================
# AI/ML CONFIGURATION (Disabled for CI)
# ============================================================================

# Disable AI features in CI
AI_NOTE_WRITING_ENABLED: false
AI_MODERATION_ENABLED: false

# ============================================================================
# TESTING CONFIGURATION
# ============================================================================

# Python testing
PYTHONPATH: .
PYTEST_WORKERS: 4

# Test timeouts
TEST_TIMEOUT: 60
INTEGRATION_TEST_TIMEOUT: 120

# ============================================================================
# COMMUNITY NOTES SCORING CONFIGURATION
# ============================================================================

# Minimum ratings needed for scoring (must match test expectations)
MIN_RATINGS_NEEDED: 2
MIN_RATERS_PER_NOTE: 2

# ============================================================================
# FEATURE FLAGS (CI defaults)
# ============================================================================

# Feature flags for testing
ENABLE_RATE_LIMITING: true
ENABLE_WEBHOOKS: true
ENABLE_METRICS: true
ENABLE_TRACING: false

# ============================================================================
# OBSERVABILITY
# ============================================================================

# Metrics
METRICS_ENABLED: false
PROMETHEUS_PORT: 9090

# Logging
LOG_FORMAT: json
LOG_TO_FILE: false
